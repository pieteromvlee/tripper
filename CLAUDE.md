# Tripper - Project Guide for Claude

## Project Overview

Tripper is a trip planning application with interactive maps. Built with:

- **Frontend:** React 19 + TypeScript + Vite + Tailwind CSS 4
- **Backend:** Convex (serverless backend with real-time sync)
- **Auth:** @convex-dev/auth
- **Maps:** Mapbox GL + react-map-gl
- **Deployment:** Vercel

## Project Structure

```
src/
├── components/
│   ├── locations/    # Location cards, forms, lists, day selector
│   ├── map/          # TripMap, LocationMarker, MapView
│   └── trips/        # TripCard, TripList, CreateTripModal
├── pages/            # TripPage and other routes
├── hooks/            # Custom React hooks
└── lib/              # Utilities

convex/
├── _generated/       # Auto-generated Convex types (don't edit)
├── locations.ts      # Location CRUD operations
├── trips.ts          # Trip CRUD operations
└── auth.ts           # Authentication config
```

## Running the App

```bash
npm run dev          # Start Vite dev server (localhost:5173)
npx convex dev       # Start Convex backend (run in separate terminal)
npm run build        # Production build
```

## Headless Browser Testing (Puppeteer)

Puppeteer is installed for automated UI testing and inspection. Claude can use it to:
- Take screenshots of the running app
- Interact with UI elements (click, type, navigate)
- Check for console errors
- Inspect DOM and rendered content

### Test Credentials

Located in `.env` (gitignored):
```
TEST_USER_EMAIL=<email>
TEST_USER_PASSWORD=<password>
```

### Example: Take a Screenshot

```javascript
const puppeteer = require('puppeteer');

(async () => {
  const browser = await puppeteer.launch({ headless: true });
  const page = await browser.newPage();
  await page.setViewport({ width: 1280, height: 900 });
  await page.goto('http://localhost:5173', { waitUntil: 'networkidle0' });
  await page.screenshot({ path: '/tmp/screenshot.png' });
  await browser.close();
})();
```

### Example: Login and Navigate

```javascript
const puppeteer = require('puppeteer');
const fs = require('fs');

// Read credentials from .env
const env = fs.readFileSync('.env', 'utf8')
  .split('\n')
  .filter(l => l && !l.startsWith('#'))
  .reduce((acc, l) => {
    const [k, ...v] = l.split('=');
    acc[k] = v.join('=');
    return acc;
  }, {});

(async () => {
  const browser = await puppeteer.launch({ headless: true });
  const page = await browser.newPage();
  await page.goto('http://localhost:5173');

  // Click sign in, fill credentials, etc.
  // ...

  await browser.close();
})();
```

## Convex Notes

- Always use `import type` for type-only imports from `convex/_generated/dataModel`
- The `_generated` folder is auto-generated by `npx convex dev`
- Convex functions are in `convex/*.ts` and exposed via `api` object

## Environment Variables

- `.env` - Test credentials for Puppeteer (gitignored)
- `.env.local` - Convex deployment URL and other secrets (gitignored)
